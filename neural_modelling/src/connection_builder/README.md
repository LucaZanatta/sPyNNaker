Modified from https://github.com/project-rig/pynn_spinnaker
